---
title: "Project Proposal"
author: "Standard Deviants - Ava Exelbirt, Yura Heo, Claire Li"
format: pdf
execute: 
  warning: false
  message: false
editor: visual
---

```{r}
#| label: load-pkg-data
library(tidyverse)
library(tidymodels)
# add other packages as needed
library(skimr)
# add code to load data
sports <- read.csv("data/sports.csv")
```

## Introduction

-   an introduction to the subject matter you're investigating (citing any relevant literature)

-   the motivation for your research question (citing any relevant literature)

-   the primary research question you are interested in exploring

    In the school year 2019 - 2020, how can we predict the revenue in USD of collegiate sports using participation rate, sport type, expenditure, gender, total count of students, and

-   your team's hypotheses regarding the research question

    -   This is a narrative about what you think regarding the research question, not formal statistical hypotheses.

\newpage

## Data description

The data set was taken from TidyTuesday and was originally scraped from Equity in Athletics Data Analysis (EADA), a sector of the US Department of Education. The data is available on an online database found on the (EADA) website[^1].

[^1]: <https://ope.ed.gov/athletics/#/datafile/list>

This data is submitted annually from colleges to the EADA. All co-educational postsecondary institutions that receive Title IV funding that have intercollegiate athletics programs are required by the Equity in Athletics Disclosure Act to submit this data[^2]. The original data files are also created immediately after the data collection for each school. These data are collected annually starting from 2003 to 2022, but for our specific data analysis we will only look at data taken from the school year of 2019. The csv file from Tidy Tuesday contains thousands of observations from years 2015-2019, but we have adjusted the data file to only include year 2019 as this is our population we are analyzing.

[^2]: <https://knightnewhousedata.org/about-the-data#:~:text=The%20data%20is%20available%20via,student%20aid%20programs>)

The dataset we will use from the data scraped on Tidy Tuesday include many observations regarding collegiate sports. These observations include variables such as the name of the city which a school is in, the state, the school name, the classification of the school (like whether it is NCAA Division I, II, or III), the sector name of the school (like 4 year accredited university), sport, and many quantitative variables regarding characteristics about the specific school and their collegiate spending. Most of the quantitative variables are split between men and women, having two different observations for the same variable. For example, there is total male population, total female population, participation rate of women, participation rate of men, participation rate for coed sports for men, participation rate for coed sports for women, revenue for men, revenue for women, expenditures for men, and expenditures for women. There are also observations for the total amount for each of these above variables which includes both men and women; for example, total expenditures for both men and women together. The observations are therefore both quantitative and categorical and measure characteristics of different school's spending, revenue, populations, locations, and sports.

\newpage

## Initial exploratory data analysis

For data cleaning, we need to filter out observations that have missing values of the variables we need in the model. We need to create new variables by mutation to turn variables involving revenue and expenditure into the unit of millions, so that we can get larger coefficients for better modeling.

```{r}
sports <- sports |>
  mutate(total_rev_mill = total_rev_menwomen / 1000000,
         total_exp_mill = total_exp_menwomen / 1000000)
```

**Distribution of the response variable**

Our response variable is the total revenue generated by college sports.

```{r}
sports |>
  ggplot(aes(x = total_rev_mill)) +
  geom_histogram(binwidth = 10) +
  labs(title = "Distribution of Total Revenue (in million $)",
       x = "Total revenue (in million $)", y = "Count")

sports |>
  skim(total_rev_mill) |>
  select(-skim_type, -skim_variable, -complete_rate,
         - numeric.hist) |> 
  print(width = Inf) 
```
The distribution of total revenue generated by college sports is right-skewed, as most observations are at the lower end of the x axis with a number of outliers having very high values. 

The center is the median of 0.23601 million dollars due to the apparent skewness.

Since the distribution is skewed, the IQR is used as a more reliable measure of spread which is Q3 - Q1 = 0.55999 - 0.097518 = 0.462472 million dollars.

There are no missing values of total revenue.



**Distributions of one potential quantitative predictor variable and one potential categorical predictor variable**

One potential quantitative predictor variable is the total expenditure on college sports.

```{r}
sports |>
  ggplot(aes(x = total_exp_mill)) +
  geom_histogram(binwidth = 5) +
  labs(title = "Distribution of Total Expenditure (in million $)",
       x = "Total expenditure (in million $)", y = "Count")

sports |>
  skim(total_exp_mill) |>
  select(-skim_type, -skim_variable, -complete_rate,
         - numeric.hist) |> 
  print(width = Inf) 
```

The distribution of total expenditure on college sports is right-skewed with most total expenditure values in the lower range, while a number of observations have very high values that make them outliers. 

Given the apparent skewness, the center is the median of 0.245917 million dollars.

Since the distribution is skewed, the IQR is used as a more reliable measure of spread which is Q3 - Q1 = 0.614014 - 0.099035 = 0.514979 million dollars.

There are no missing values of total revenue.

One potential categorical predictor is the type of school.
```{r}
sports |>
  select(sector_name, total_exp_mill) |>
  group_by(sector_name)

sports |>
  group_by(sector_name) |>
  count() |>
  ggplot(aes(x = sector_name, y = n)) +
  geom_boxplot() +
  coord_flip() +
  labs(title = "Distribution of Types of School",
       x = "Types of school", y = "Count")
```
The distribution of types of school is uneven among the 6 types. The three types of private nonprofit, 2-year, private nonprofit, 2-year, and private for-profit, 2-year have the lowest number of observations. Private nonprofit, 4-year or above has the highest number of observations.

**The relationships between the response variable and each of the predictors from the previous step**

For the relationship between total revenue and total expenditure
```{r}
sports |>
  ggplot(aes(x = total_exp_mill,
             y = total_rev_mill)) +
  geom_point() +
  labs(title = "Total Revenue vs. Total Expenditure",
       x = "Total expenditure (in million $)", y = "Total revenue (in million $)")

cor(sports$total_exp_mill,
    sports$total_rev_mill)
```
There is a positive, linear relationship between total expenditure and total revenue. The correlation between these two variables is 0.9215324, indicating a strong strength.

There are more observations with total expenditure in the lower range, mostly concentrating between 0 and 20 million dollars. There are potential outliers where total expenditure is around and above 40%. 

For relationship between total renvenue and type of school
```{r}
sports |>
  ggplot(aes(x = sector_name,
             y = total_rev_mill)) +
  geom_boxplot() +
  coord_flip() +
  labs(title = "Total Revenue vs. Type of School",
       x = "Type of school", y = "Total revenue (in million $)")
```
Public, 4 year or above and private for-profit, 2-year have larger spreads of total revenue compared to the other types of school. Public, 4-year or above has the highest number of high values in total revenue, which are also outliers exceeding the spread of most observations among the 6 types of school with private nonprofit, 4-year or above having the second most outliers. Public, 4 year or above has the observation with the highest value of total revenue. The 50% range of total revenue for private for-profit, 2-year type of school is higher than the rest.

**A potential interaction effect you're interested in exploring**

I'm interested in exploring the potential interaction effect between expenditure and type of school.

```{r}
sports |>
  ggplot(aes(x = total_exp_mill,
             y = total_rev_mill,
             color = sector_name)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  scale_color_discrete(name = "Type of school") +
  labs(title = "Total Revenue vs. Total Expenditure",
       x = "Total expenditure (in million $)", y = "Total revenue (in million $)")
```
The lines are not parallel indicating there is an interaction effect. The slope of total expenditure differs based on the type of school.

\newpage

## Analysis approach

-   a description of the response variable and list of all potential predictors

-   regression model technique (multiple linear regression or logistic regression)

\newpage

## Data dictionary

The data dictionary can be found [here](ADD%20LINK!!!) \[Update the link and remove this note!\]

Submit a data dictionary for all the variables in your data set in the `README` of the `data` folder. You do [not]{.underline} need to include the data dictionary in the PDF document.
